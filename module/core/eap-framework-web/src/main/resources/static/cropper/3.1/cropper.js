/*!
 * Cropper v3.1.3
 * https://github.com/fengyuanchen/cropper
 *
 * Copyright (c) 2014-2017 Chen Fengyuan
 * Released under the MIT license
 *
 * Date: 2017-10-21T10:04:29.734Z
 */
(function(b,a){typeof exports==="object"&&typeof module!=="undefined"?a(require("jquery")):typeof define==="function"&&define.amd?define(["jquery"],a):(a(b.jQuery))}(this,(function(a6){a6=a6&&a6.hasOwnProperty("default")?a6["default"]:a6;var ab=typeof window!=="undefined"?window:{};var p="cropper";var G="all";var aR="crop";var bn="move";var U="zoom";var aG="e";var bj="w";var o="s";var u="n";var N="ne";var aM="nw";var P="se";var aW="sw";var at=p+"-crop";var aj=p+"-disabled";var aE=p+"-hidden";var a0=p+"-hide";var aV=p+"-invisible";var M=p+"-modal";var a3=p+"-move";var r="action";var bu="preview";var S="crop";var aP="move";var bw="none";var F="crop";var a5="cropend";var bt="cropmove";var w="cropstart";var H="dblclick";var aK="error";var bg="load";var bv=ab.PointerEvent?"pointerdown":"touchstart mousedown";var ad=ab.PointerEvent?"pointermove":"touchmove mousemove";var aJ=ab.PointerEvent?" pointerup pointercancel":"touchend touchcancel mouseup";var m="ready";var an="resize";var c="wheel mousewheel DOMMouseScroll";var bp="zoom";var br=/^(e|w|s|n|se|sw|ne|nw|all|crop|move|zoom)$/;var s=/^data:/;var ar=/^data:image\/jpeg;base64,/;var j=/^(img|canvas)$/i;var bd={viewMode:0,dragMode:S,aspectRatio:NaN,data:null,preview:"",responsive:true,restore:true,checkCrossOrigin:true,checkOrientation:true,modal:true,guides:true,center:true,highlight:true,background:true,autoCrop:true,autoCropArea:0.8,movable:true,rotatable:true,scalable:true,zoomable:true,zoomOnTouch:true,zoomOnWheel:true,wheelZoomRatio:0.1,cropBoxMovable:true,cropBoxResizable:true,toggleDragModeOnDblclick:true,minCanvasWidth:0,minCanvasHeight:0,minCropBoxWidth:0,minCropBoxHeight:0,minContainerWidth:200,minContainerHeight:100,ready:null,cropstart:null,cropmove:null,cropend:null,crop:null,zoom:null};var a8='<div class="cropper-container"><div class="cropper-wrap-box"><div class="cropper-canvas"></div></div><div class="cropper-drag-box"></div><div class="cropper-crop-box"><span class="cropper-view-box"></span><span class="cropper-dashed dashed-h"></span><span class="cropper-dashed dashed-v"></span><span class="cropper-center"></span><span class="cropper-face"></span><span class="cropper-line line-e" data-action="e"></span><span class="cropper-line line-n" data-action="n"></span><span class="cropper-line line-w" data-action="w"></span><span class="cropper-line line-s" data-action="s"></span><span class="cropper-point point-e" data-action="e"></span><span class="cropper-point point-n" data-action="n"></span><span class="cropper-point point-w" data-action="w"></span><span class="cropper-point point-s" data-action="s"></span><span class="cropper-point point-ne" data-action="ne"></span><span class="cropper-point point-nw" data-action="nw"></span><span class="cropper-point point-sw" data-action="sw"></span><span class="cropper-point point-se" data-action="se"></span></div></div>';function a2(by){if(Array.isArray(by)){for(var bA=0,bz=Array(by.length);bA<by.length;bA++){bz[bA]=by[bA]}return bz}else{return Array.from(by)}}function bf(by){return typeof by==="string"}var aI=Number.isNaN||ab.isNaN;function ac(by){return typeof by==="number"&&!aI(by)}function ah(by){return typeof by==="undefined"}function J(bC,bA){for(var by=arguments.length,bz=Array(by>2?by-2:0),bB=2;bB<by;bB++){bz[bB-2]=arguments[bB]}return function(){for(var bD=arguments.length,bF=Array(bD),bE=0;bE<bD;bE++){bF[bE]=arguments[bE]}return bC.apply(bA,bz.concat(bF))}}var y=Object.keys||function y(bz){var by=[];a6.each(bz,function(bA){by.push(bA)});return by};var ag=/\.\d*(?:0|9){12}\d*$/i;function D(by){var bz=arguments.length>1&&arguments[1]!==undefined?arguments[1]:100000000000;return ag.test(by)?Math.round(by*bz)/bz:by}var bl=ab.location;var a=/^(https?:)\/\/([^:/?#]+):?(\d*)/i;function az(by){var bz=by.match(a);return bz&&(bz[1]!==bl.protocol||bz[2]!==bl.hostname||bz[3]!==bl.port)}function O(by){var bz="timestamp="+new Date().getTime();return by+(by.indexOf("?")===-1?"?":"&")+bz}function E(bC){var bB=bC.rotate,bA=bC.scaleX,bz=bC.scaleY,bE=bC.translateX,bD=bC.translateY;var by=[];if(ac(bE)&&bE!==0){by.push("translateX("+bE+"px)")}if(ac(bD)&&bD!==0){by.push("translateY("+bD+"px)")}if(ac(bB)&&bB!==0){by.push("rotate("+bB+"deg)")}if(ac(bA)&&bA!==1){by.push("scaleX("+bA+")")}if(ac(bz)&&bz!==1){by.push("scaleY("+bz+")")}return by.length?by.join(" "):"none"}var bx=ab.navigator;var aX=bx&&/(Macintosh|iPhone|iPod|iPad).*AppleWebKit/i.test(bx.userAgent);function Q(by,bA){if(by.naturalWidth&&!aX){bA(by.naturalWidth,by.naturalHeight);return}var bz=document.createElement("img");bz.onload=function(){bA(bz.width,bz.height)};bz.src=by.src}function bh(by){var bA=a6.extend({},by);var bz=[];a6.each(by,function(bB,bC){delete bA[bB];a6.each(bA,function(bL,bI){var bE=Math.abs(bC.startX-bI.startX);var bK=Math.abs(bC.startY-bI.startY);var bD=Math.abs(bC.endX-bI.endX);var bJ=Math.abs(bC.endY-bI.endY);var bG=Math.sqrt(bE*bE+bK*bK);var bF=Math.sqrt(bD*bD+bJ*bJ);var bH=(bF-bG)/bG;bz.push(bH)})});bz.sort(function(bC,bB){return Math.abs(bC)<Math.abs(bB)});return bz[0]}function aa(bC,bB){var bA=bC.pageX,bz=bC.pageY;var by={endX:bA,endY:bz};if(bB){return by}return a6.extend({startX:bA,startY:bz},by)}function aY(by){var bA=0;var bz=0;var bB=0;a6.each(by,function(bE,bF){var bD=bF.startX,bC=bF.startY;bA+=bD;bz+=bC;bB+=1});bA/=bB;bz/=bB;return{pageX:bA,pageY:bz}}var bb=Number.isFinite||ab.isFinite;function k(bC){var bB=bC.aspectRatio,by=bC.height,bA=bC.width;var bz=function bz(bD){return bb(bD)&&bD>0};if(bz(bA)&&bz(by)){if(by*bB>bA){by=bA/bB}else{bA=by*bB}}else{if(bz(bA)){by=bA/bB}else{if(bz(by)){bA=by*bB}}}return{width:bA,height:by}}function bs(bD){var bC=bD.width,bz=bD.height,bE=bD.degree;bE=Math.abs(bE);if(bE%180===90){return{width:bz,height:bC}}var bB=bE%90*Math.PI/180;var by=Math.sin(bB);var bA=Math.cos(bB);return{width:bC*bA+bz*by,height:bC*by+bz*bA}}function ba(bB,bG,bF,bD){var b0=bG.naturalWidth,bV=bG.naturalHeight,bU=bG.rotate,b4=bU===undefined?0:bU,bN=bG.scaleX,bY=bN===undefined?1:bN,bL=bG.scaleY,bX=bL===undefined?1:bL;var bR=bF.aspectRatio,bE=bF.naturalWidth,bH=bF.naturalHeight;var b5=bD.fillColor,b7=b5===undefined?"transparent":b5,bZ=bD.imageSmoothingEnabled,bK=bZ===undefined?true:bZ,bS=bD.imageSmoothingQuality,bI=bS===undefined?"low":bS,bT=bD.maxWidth,bQ=bT===undefined?Infinity:bT,b1=bD.maxHeight,b3=b1===undefined?Infinity:b1,bO=bD.minWidth,bJ=bO===undefined?0:bO,bM=bD.minHeight,bP=bM===undefined?0:bM;var b2=k({aspectRatio:bR,width:bQ,height:b3});var bW=k({aspectRatio:bR,width:bJ,height:bP});var by=Math.min(b2.width,Math.max(bW.width,bE));var bA=Math.min(b2.height,Math.max(bW.height,bH));var bC=document.createElement("canvas");var b6=bC.getContext("2d");var bz=[-b0/2,-bV/2,b0,bV];bC.width=D(by);bC.height=D(bA);b6.fillStyle=b7;b6.fillRect(0,0,by,bA);b6.save();b6.translate(by/2,bA/2);b6.rotate(b4*Math.PI/180);b6.scale(bY,bX);b6.imageSmoothingEnabled=!!bK;b6.imageSmoothingQuality=bI;b6.drawImage.apply(b6,[bB].concat(a2(a6.map(bz,function(b8){return Math.floor(D(b8))}))));b6.restore();return bC}var e=String.fromCharCode;function am(bB,bC,bz){var bA="";var by=void 0;bz+=bC;for(by=bC;by<bz;by+=1){bA+=e(bB.getUint8(by))}return bA}var ai=/^data:.*,/;function bm(bB){var bz=bB.replace(ai,"");var bC=atob(bz);var bA=new ArrayBuffer(bC.length);var by=new Uint8Array(bA);a6.each(by,function(bD){by[bD]=bC.charCodeAt(bD)});return bA}function bi(bz,bB){var by=new Uint8Array(bz);var bA="";a6.each(by,function(bC,bD){bA+=e(bD)});return"data:"+bB+";base64,"+btoa(bA)}function R(bF){var bJ=new DataView(bF);var bA=void 0;var bz=void 0;var bE=void 0;var bM=void 0;if(bJ.getUint8(0)===255&&bJ.getUint8(1)===216){var bB=bJ.byteLength;var bC=2;while(bC<bB){if(bJ.getUint8(bC)===255&&bJ.getUint8(bC+1)===225){bE=bC;break}bC+=1}}if(bE){var bL=bE+4;var bI=bE+10;if(am(bJ,bL,4)==="Exif"){var bH=bJ.getUint16(bI);bz=bH===18761;if(bz||bH===19789){if(bJ.getUint16(bI+2,bz)===42){var by=bJ.getUint32(bI+4,bz);if(by>=8){bM=bI+by}}}}}if(bM){var bG=bJ.getUint16(bM,bz);var bK=void 0;var bD=void 0;for(bD=0;bD<bG;bD+=1){bK=bM+bD*12+2;if(bJ.getUint16(bK,bz)===274){bK+=8;bA=bJ.getUint16(bK,bz);bJ.setUint16(bK,1,bz);break}}}return bA}function ax(bz){var bB=0;var bA=1;var by=1;switch(bz){case 2:bA=-1;break;case 3:bB=-180;break;case 4:by=-1;break;case 5:bB=90;by=-1;break;case 6:bB=90;break;case 7:bB=90;bA=-1;break;case 8:bB=-90;break;default:}return{rotate:bB,scaleX:bA,scaleY:by}}var ap={render:function ap(){this.initContainer();this.initCanvas();this.initCropBox();this.renderCanvas();if(this.cropped){this.renderCropBox()}},initContainer:function C(){var by=this.$element,bA=this.options,bB=this.$container,bz=this.$cropper;bz.addClass(aE);by.removeClass(aE);bz.css(this.container={width:Math.max(bB.width(),Number(bA.minContainerWidth)||200),height:Math.max(bB.height(),Number(bA.minContainerHeight)||100)});by.addClass(aE);bz.removeClass(aE)},initCanvas:function af(){var by=this.container,bD=this.image;var bB=this.options.viewMode;var bA=Math.abs(bD.rotate)%180===90;var bF=bA?bD.naturalHeight:bD.naturalWidth;var bG=bA?bD.naturalWidth:bD.naturalHeight;var bH=bF/bG;var bC=by.width;var bE=by.height;if(by.height*bH>by.width){if(bB===3){bC=by.height*bH}else{bE=by.width/bH}}else{if(bB===3){bE=by.width/bH}else{bC=by.height*bH}}var bz={aspectRatio:bH,naturalWidth:bF,naturalHeight:bG,width:bC,height:bE};bz.left=(by.width-bC)/2;bz.top=(by.height-bE)/2;bz.oldLeft=bz.left;bz.oldTop=bz.top;this.canvas=bz;this.limited=bB===1||bB===2;this.limitCanvas(true,true);this.initialImage=a6.extend({},bD);this.initialCanvas=a6.extend({},bz)},limitCanvas:function aw(bH,bE){var bL=this.options,by=this.container,bA=this.canvas,bD=this.cropBox;var bC=bL.viewMode;var bJ=bA.aspectRatio;var bI=this.cropped&&bD;if(bH){var bK=Number(bL.minCanvasWidth)||0;var bF=Number(bL.minCanvasHeight)||0;if(bC>0){if(bC>1){bK=Math.max(bK,by.width);bF=Math.max(bF,by.height);if(bC===3){if(bF*bJ>bK){bK=bF*bJ}else{bF=bK/bJ}}}else{if(bK){bK=Math.max(bK,bI?bD.width:0)}else{if(bF){bF=Math.max(bF,bI?bD.height:0)}else{if(bI){bK=bD.width;bF=bD.height;if(bF*bJ>bK){bK=bF*bJ}else{bF=bK/bJ}}}}}}var bB=k({aspectRatio:bJ,width:bK,height:bF});bK=bB.width;bF=bB.height;bA.minWidth=bK;bA.minHeight=bF;bA.maxWidth=Infinity;bA.maxHeight=Infinity}if(bE){if(bC>0){var bz=by.width-bA.width;var bG=by.height-bA.height;bA.minLeft=Math.min(0,bz);bA.minTop=Math.min(0,bG);bA.maxLeft=Math.max(0,bz);bA.maxTop=Math.max(0,bG);if(bI&&this.limited){bA.minLeft=Math.min(bD.left,bD.left+bD.width-bA.width);bA.minTop=Math.min(bD.top,bD.top+bD.height-bA.height);bA.maxLeft=bD.left;bA.maxTop=bD.top;if(bC===2){if(bA.width>=by.width){bA.minLeft=Math.min(0,bz);bA.maxLeft=Math.max(0,bz)}if(bA.height>=by.height){bA.minTop=Math.min(0,bG);bA.maxTop=Math.max(0,bG)}}}}else{bA.minLeft=-bA.width;bA.minTop=-bA.height;bA.maxLeft=by.width;bA.maxTop=by.height}}},renderCanvas:function bk(bD,bC){var bA=this.canvas,bB=this.image;if(bC){var bz=bs({width:bB.naturalWidth*Math.abs(bB.scaleX||1),height:bB.naturalHeight*Math.abs(bB.scaleY||1),degree:bB.rotate||0}),bE=bz.width,bF=bz.height;var by=bA.width*(bE/bA.naturalWidth);var bG=bA.height*(bF/bA.naturalHeight);bA.left-=(by-bA.width)/2;bA.top-=(bG-bA.height)/2;bA.width=by;bA.height=bG;bA.aspectRatio=bE/bF;bA.naturalWidth=bE;bA.naturalHeight=bF;this.limitCanvas(true,false)}if(bA.width>bA.maxWidth||bA.width<bA.minWidth){bA.left=bA.oldLeft}if(bA.height>bA.maxHeight||bA.height<bA.minHeight){bA.top=bA.oldTop}bA.width=Math.min(Math.max(bA.width,bA.minWidth),bA.maxWidth);bA.height=Math.min(Math.max(bA.height,bA.minHeight),bA.maxHeight);this.limitCanvas(false,true);bA.left=Math.min(Math.max(bA.left,bA.minLeft),bA.maxLeft);bA.top=Math.min(Math.max(bA.top,bA.minTop),bA.maxTop);bA.oldLeft=bA.left;bA.oldTop=bA.top;this.$canvas.css({width:bA.width,height:bA.height,transform:E({translateX:bA.left,translateY:bA.top})});this.renderImage(bD);if(this.cropped&&this.limited){this.limitCropBox(true,true)}},renderImage:function t(bC){var bz=this.canvas,bB=this.image;var bA=bB.naturalWidth*(bz.width/bz.naturalWidth);var by=bB.naturalHeight*(bz.height/bz.naturalHeight);a6.extend(bB,{width:bA,height:by,left:(bz.width-bA)/2,top:(bz.height-by)/2});this.$clone.css({width:bB.width,height:bB.height,transform:E(a6.extend({translateX:bB.left,translateY:bB.top},bB))});if(bC){this.output()}},initCropBox:function d(){var bz=this.options,by=this.canvas;var bB=bz.aspectRatio;var bC=Number(bz.autoCropArea)||0.8;var bA={width:by.width,height:by.height};if(bB){if(by.height*bB>by.width){bA.height=bA.width/bB}else{bA.width=bA.height*bB}}this.cropBox=bA;this.limitCropBox(true,true);bA.width=Math.min(Math.max(bA.width,bA.minWidth),bA.maxWidth);bA.height=Math.min(Math.max(bA.height,bA.minHeight),bA.maxHeight);bA.width=Math.max(bA.minWidth,bA.width*bC);bA.height=Math.max(bA.minHeight,bA.height*bC);bA.left=by.left+(by.width-bA.width)/2;bA.top=by.top+(by.height-bA.height)/2;bA.oldLeft=bA.left;bA.oldTop=bA.top;this.initialCropBox=a6.extend({},bA)},limitCropBox:function Z(bF,bC){var bJ=this.options,bz=this.container,bA=this.canvas,bB=this.cropBox,bG=this.limited;var bI=bJ.aspectRatio;if(bF){var by=Number(bJ.minCropBoxWidth)||0;var bD=Number(bJ.minCropBoxHeight)||0;var bE=Math.min(bz.width,bG?bA.width:bz.width);var bH=Math.min(bz.height,bG?bA.height:bz.height);by=Math.min(by,bz.width);bD=Math.min(bD,bz.height);if(bI){if(by&&bD){if(bD*bI>by){bD=by/bI}else{by=bD*bI}}else{if(by){bD=by/bI}else{if(bD){by=bD*bI}}}if(bH*bI>bE){bH=bE/bI}else{bE=bH*bI}}bB.minWidth=Math.min(by,bE);bB.minHeight=Math.min(bD,bH);bB.maxWidth=bE;bB.maxHeight=bH}if(bC){if(bG){bB.minLeft=Math.max(0,bA.left);bB.minTop=Math.max(0,bA.top);bB.maxLeft=Math.min(bz.width,bA.left+bA.width)-bB.width;bB.maxTop=Math.min(bz.height,bA.top+bA.height)-bB.height}else{bB.minLeft=0;bB.minTop=0;bB.maxLeft=bz.width-bB.width;bB.maxTop=bz.height-bB.height}}},renderCropBox:function B(){var bz=this.options,by=this.container,bA=this.cropBox;if(bA.width>bA.maxWidth||bA.width<bA.minWidth){bA.left=bA.oldLeft}if(bA.height>bA.maxHeight||bA.height<bA.minHeight){bA.top=bA.oldTop}bA.width=Math.min(Math.max(bA.width,bA.minWidth),bA.maxWidth);bA.height=Math.min(Math.max(bA.height,bA.minHeight),bA.maxHeight);this.limitCropBox(false,true);bA.left=Math.min(Math.max(bA.left,bA.minLeft),bA.maxLeft);bA.top=Math.min(Math.max(bA.top,bA.minTop),bA.maxTop);bA.oldLeft=bA.left;bA.oldTop=bA.top;if(bz.movable&&bz.cropBoxMovable){this.$face.data(r,bA.width>=by.width&&bA.height>=by.height?bn:G)}this.$cropBox.css({width:bA.width,height:bA.height,transform:E({translateX:bA.left,translateY:bA.top})});if(this.cropped&&this.limited){this.limitCanvas(true,true)}if(!this.disabled){this.output()}},output:function v(){this.preview();if(this.completed){this.trigger(F,this.getData())}}};var ay={initPreview:function z(){var by=this.crossOrigin;var bz=by?this.crossOriginUrl:this.url;var bA=document.createElement("img");if(by){bA.crossOrigin=by}bA.src=bz;var bB=a6(bA);this.$preview=a6(this.options.preview);this.$clone2=bB;this.$viewBox.html(bB);this.$preview.each(function(bF,bE){var bC=a6(bE);var bD=document.createElement("img");bC.data(bu,{width:bC.width(),height:bC.height(),html:bC.html()});if(by){bD.crossOrigin=by}bD.src=bz;bD.style.cssText='display:block;width:100%;height:auto;min-width:0!important;min-height:0!important;max-width:none!important;max-height:none!important;image-orientation:0deg!important;"';bC.html(bD)})},resetPreview:function aU(){this.$preview.each(function(bA,bz){var by=a6(bz);var bB=by.data(bu);by.css({width:bB.width,height:bB.height}).html(bB.html).removeData(bu)})},preview:function ay(){var bC=this.image,bA=this.canvas,bD=this.cropBox;var by=bD.width,bE=bD.height;var bz=bC.width,bG=bC.height;var bB=bD.left-bA.left-bC.left;var bF=bD.top-bA.top-bC.top;if(!this.cropped||this.disabled){return}this.$clone2.css({width:bz,height:bG,transform:E(a6.extend({translateX:-bB,translateY:-bF},bC))});this.$preview.each(function(bM,bN){var bP=a6(bN);var bJ=bP.data(bu);var bI=bJ.width;var bK=bJ.height;var bL=bI;var bH=bK;var bO=1;if(by){bO=bI/by;bH=bE*bO}if(bE&&bH>bK){bO=bK/bE;bL=by*bO;bH=bK}bP.css({width:bL,height:bH}).find("img").css({width:bz*bO,height:bG*bO,transform:E(a6.extend({translateX:-bB*bO,translateY:-bF*bO},bC))})})}};var I={bind:function bc(){var by=this.$element,bA=this.options,bz=this.$cropper;if(a6.isFunction(bA.cropstart)){by.on(w,bA.cropstart)}if(a6.isFunction(bA.cropmove)){by.on(bt,bA.cropmove)}if(a6.isFunction(bA.cropend)){by.on(a5,bA.cropend)}if(a6.isFunction(bA.crop)){by.on(F,bA.crop)}if(a6.isFunction(bA.zoom)){by.on(bp,bA.zoom)}bz.on(bv,J(this.cropStart,this));if(bA.zoomable&&bA.zoomOnWheel){bz.on(c,J(this.wheel,this))}if(bA.toggleDragModeOnDblclick){bz.on(H,J(this.dblclick,this))}a6(document).on(ad,this.onCropMove=J(this.cropMove,this)).on(aJ,this.onCropEnd=J(this.cropEnd,this));if(bA.responsive){a6(window).on(an,this.onResize=J(this.resize,this))}},unbind:function Y(){var by=this.$element,bA=this.options,bz=this.$cropper;if(a6.isFunction(bA.cropstart)){by.off(w,bA.cropstart)}if(a6.isFunction(bA.cropmove)){by.off(bt,bA.cropmove)}if(a6.isFunction(bA.cropend)){by.off(a5,bA.cropend)}if(a6.isFunction(bA.crop)){by.off(F,bA.crop)}if(a6.isFunction(bA.zoom)){by.off(bp,bA.zoom)}bz.off(bv,this.cropStart);if(bA.zoomable&&bA.zoomOnWheel){bz.off(c,this.wheel)}if(bA.toggleDragModeOnDblclick){bz.off(H,this.dblclick)}a6(document).off(ad,this.onCropMove).off(aJ,this.onCropEnd);if(bA.responsive){a6(window).off(an,this.onResize)}}};var b={resize:function n(){var bB=this.options,bF=this.$container,by=this.container;var bE=Number(bB.minContainerWidth)||200;var bz=Number(bB.minContainerHeight)||100;if(this.disabled||by.width<=bE||by.height<=bz){return}var bC=bF.width()/by.width;if(bC!==1||bF.height()!==by.height){var bA=void 0;var bD=void 0;if(bB.restore){bA=this.getCanvasData();bD=this.getCropBoxData()}this.render();if(bB.restore){this.setCanvasData(a6.each(bA,function(bG,bH){bA[bG]=bH*bC}));this.setCropBoxData(a6.each(bD,function(bG,bH){bD[bG]=bH*bC}))}}},dblclick:function A(){if(this.disabled||this.options.dragMode===bw){return}this.setDragMode(this.$dragBox.hasClass(at)?aP:S)},wheel:function q(bz){var bC=this;var bA=bz.originalEvent||bz;var by=Number(this.options.wheelZoomRatio)||0.1;if(this.disabled){return}bz.preventDefault();if(this.wheeling){return}this.wheeling=true;setTimeout(function(){bC.wheeling=false},50);var bB=1;if(bA.deltaY){bB=bA.deltaY>0?1:-1}else{if(bA.wheelDelta){bB=-bA.wheelDelta/120}else{if(bA.detail){bB=bA.detail>0?1:-1}}}this.zoom(-bB*by,bz)},cropStart:function aq(bC){if(this.disabled){return}var bA=this.options,bz=this.pointers;var by=bC.originalEvent;var bB=void 0;if(by&&by.changedTouches){a6.each(by.changedTouches,function(bD,bE){bz[bE.identifier]=aa(bE)})}else{bz[by&&by.pointerId||0]=aa(by||bC)}if(y(bz).length>1&&bA.zoomable&&bA.zoomOnTouch){bB=U}else{bB=a6(bC.target).data(r)}if(!br.test(bB)){return}if(this.trigger(w,{originalEvent:by,action:bB}).isDefaultPrevented()){return}bC.preventDefault();this.action=bB;this.cropping=false;if(bB===aR){this.cropping=true;this.$dragBox.addClass(M)}},cropMove:function bq(bB){var bA=this.action;if(this.disabled||!bA){return}var bz=this.pointers;var by=bB.originalEvent;bB.preventDefault();if(this.trigger(bt,{originalEvent:by,action:bA}).isDefaultPrevented()){return}if(by&&by.changedTouches){a6.each(by.changedTouches,function(bC,bD){a6.extend(bz[bD.identifier],aa(bD,true))})}else{a6.extend(bz[by&&by.pointerId||0],aa(by||bB,true))}this.change(bB)},cropEnd:function aB(bB){if(this.disabled){return}var bA=this.action;var bz=this.pointers;var by=bB.originalEvent;if(by&&by.changedTouches){a6.each(by.changedTouches,function(bC,bD){delete bz[bD.identifier]})}else{delete bz[by&&by.pointerId||0]}if(!bA){return}bB.preventDefault();if(!y(bz).length){this.action=""}if(this.cropping){this.cropping=false;this.$dragBox.toggleClass(M,this.cropped&&this.options.modal)}this.trigger(a5,{originalEvent:by,action:bA})}};var aQ={change:function aQ(bS){var bB=this.options,bG=this.pointers,bH=this.container,bA=this.canvas,by=this.cropBox;var bQ=this.action;var bz=bB.aspectRatio;var bC=by.left,bJ=by.top,bO=by.width,bK=by.height;var bU=bC+bO;var bE=bJ+bK;var bL=0;var bF=0;var bR=bH.width;var bN=bH.height;var bM=true;var bD=void 0;if(!bz&&bS.shiftKey){bz=bO&&bK?bO/bK:1}if(this.limited){bL=by.minLeft;bF=by.minTop;bR=bL+Math.min(bH.width,bA.width,bA.left+bA.width);bN=bF+Math.min(bH.height,bA.height,bA.top+bA.height)}var bP=bG[y(bG)[0]];var bI={x:bP.endX-bP.startX,y:bP.endY-bP.startY};var bT=function bT(bV){switch(bV){case aG:if(bU+bI.x>bR){bI.x=bR-bU}break;case bj:if(bC+bI.x<bL){bI.x=bL-bC}break;case u:if(bJ+bI.y<bF){bI.y=bF-bJ}break;case o:if(bE+bI.y>bN){bI.y=bN-bE}break;default:}};switch(bQ){case G:bC+=bI.x;bJ+=bI.y;break;case aG:if(bI.x>=0&&(bU>=bR||bz&&(bJ<=bF||bE>=bN))){bM=false;break}bT(aG);bO+=bI.x;if(bz){bK=bO/bz;bJ-=bI.x/bz/2}if(bO<0){bQ=bj;bO=0}break;case u:if(bI.y<=0&&(bJ<=bF||bz&&(bC<=bL||bU>=bR))){bM=false;break}bT(u);bK-=bI.y;bJ+=bI.y;if(bz){bO=bK*bz;bC+=bI.y*bz/2}if(bK<0){bQ=o;bK=0}break;case bj:if(bI.x<=0&&(bC<=bL||bz&&(bJ<=bF||bE>=bN))){bM=false;break}bT(bj);bO-=bI.x;bC+=bI.x;if(bz){bK=bO/bz;bJ+=bI.x/bz/2}if(bO<0){bQ=aG;bO=0}break;case o:if(bI.y>=0&&(bE>=bN||bz&&(bC<=bL||bU>=bR))){bM=false;break}bT(o);bK+=bI.y;if(bz){bO=bK*bz;bC-=bI.y*bz/2}if(bK<0){bQ=u;bK=0}break;case N:if(bz){if(bI.y<=0&&(bJ<=bF||bU>=bR)){bM=false;break}bT(u);bK-=bI.y;bJ+=bI.y;bO=bK*bz}else{bT(u);bT(aG);if(bI.x>=0){if(bU<bR){bO+=bI.x}else{if(bI.y<=0&&bJ<=bF){bM=false}}}else{bO+=bI.x}if(bI.y<=0){if(bJ>bF){bK-=bI.y;bJ+=bI.y}}else{bK-=bI.y;bJ+=bI.y}}if(bO<0&&bK<0){bQ=aW;bK=0;bO=0}else{if(bO<0){bQ=aM;bO=0}else{if(bK<0){bQ=P;bK=0}}}break;case aM:if(bz){if(bI.y<=0&&(bJ<=bF||bC<=bL)){bM=false;break}bT(u);bK-=bI.y;bJ+=bI.y;bO=bK*bz;bC+=bI.y*bz}else{bT(u);bT(bj);if(bI.x<=0){if(bC>bL){bO-=bI.x;bC+=bI.x}else{if(bI.y<=0&&bJ<=bF){bM=false}}}else{bO-=bI.x;bC+=bI.x}if(bI.y<=0){if(bJ>bF){bK-=bI.y;bJ+=bI.y}}else{bK-=bI.y;bJ+=bI.y}}if(bO<0&&bK<0){bQ=P;bK=0;bO=0}else{if(bO<0){bQ=N;bO=0}else{if(bK<0){bQ=aW;bK=0}}}break;case aW:if(bz){if(bI.x<=0&&(bC<=bL||bE>=bN)){bM=false;break}bT(bj);bO-=bI.x;bC+=bI.x;bK=bO/bz}else{bT(o);bT(bj);if(bI.x<=0){if(bC>bL){bO-=bI.x;bC+=bI.x}else{if(bI.y>=0&&bE>=bN){bM=false}}}else{bO-=bI.x;bC+=bI.x}if(bI.y>=0){if(bE<bN){bK+=bI.y}}else{bK+=bI.y}}if(bO<0&&bK<0){bQ=N;bK=0;bO=0}else{if(bO<0){bQ=P;bO=0}else{if(bK<0){bQ=aM;bK=0}}}break;case P:if(bz){if(bI.x>=0&&(bU>=bR||bE>=bN)){bM=false;break}bT(aG);bO+=bI.x;bK=bO/bz}else{bT(o);bT(aG);if(bI.x>=0){if(bU<bR){bO+=bI.x}else{if(bI.y>=0&&bE>=bN){bM=false}}}else{bO+=bI.x}if(bI.y>=0){if(bE<bN){bK+=bI.y}}else{bK+=bI.y}}if(bO<0&&bK<0){bQ=aM;bK=0;bO=0}else{if(bO<0){bQ=aW;bO=0}else{if(bK<0){bQ=N;bK=0}}}break;case bn:this.move(bI.x,bI.y);bM=false;break;case U:this.zoom(bh(bG),bS.originalEvent);bM=false;break;case aR:if(!bI.x||!bI.y){bM=false;break}bD=this.$cropper.offset();bC=bP.startX-bD.left;bJ=bP.startY-bD.top;bO=by.minWidth;bK=by.minHeight;if(bI.x>0){bQ=bI.y>0?P:N}else{if(bI.x<0){bC-=bO;bQ=bI.y>0?aW:aM}}if(bI.y<0){bJ-=bK}if(!this.cropped){this.$cropBox.removeClass(aE);this.cropped=true;if(this.limited){this.limitCropBox(true,true)}}break;default:}if(bM){by.width=bO;by.height=bK;by.left=bC;by.top=bJ;this.action=bQ;this.renderCropBox()}a6.each(bG,function(bV,bW){bW.startX=bW.endX;bW.startY=bW.endY})}};function aT(by){if(Array.isArray(by)){for(var bA=0,bz=Array(by.length);bA<by.length;bA++){bz[bA]=by[bA]}return bz}else{return Array.from(by)}}var a9={crop:function V(){if(!this.ready||this.disabled){return}if(!this.cropped){this.cropped=true;this.limitCropBox(true,true);if(this.options.modal){this.$dragBox.addClass(M)}this.$cropBox.removeClass(aE)}this.setCropBoxData(this.initialCropBox)},reset:function au(){if(!this.ready||this.disabled){return}this.image=a6.extend({},this.initialImage);this.canvas=a6.extend({},this.initialCanvas);this.cropBox=a6.extend({},this.initialCropBox);this.renderCanvas();if(this.cropped){this.renderCropBox()}},clear:function aN(){if(!this.cropped||this.disabled){return}a6.extend(this.cropBox,{left:0,top:0,width:0,height:0});this.cropped=false;this.renderCropBox();this.limitCanvas(true,true);this.renderCanvas();this.$dragBox.removeClass(M);this.$cropBox.addClass(aE)},replace:function ak(bz,by){if(!this.disabled&&bz){if(this.isImg){this.$element.attr("src",bz)}if(by){this.url=bz;this.$clone.attr("src",bz);if(this.ready){this.$preview.find("img").add(this.$clone2).attr("src",bz)}}else{if(this.isImg){this.replaced=true}this.options.data=null;this.load(bz)}}},enable:function X(){if(this.ready){this.disabled=false;this.$cropper.removeClass(aj)}},disable:function K(){if(this.ready){this.disabled=true;this.$cropper.addClass(aj)}},destroy:function f(){var by=this.$element;if(this.loaded){if(this.isImg&&this.replaced){by.attr("src",this.originalUrl)}this.unbuild();by.removeClass(aE)}else{if(this.isImg){by.off(bg,this.start)}else{if(this.$clone){this.$clone.remove()}}}by.removeData(p)},move:function aS(by,bC){var bz=this.canvas,bB=bz.left,bA=bz.top;this.moveTo(ah(by)?by:bB+Number(by),ah(bC)?bC:bA+Number(bC))},moveTo:function a1(by,bB){var bz=this.canvas;var bA=false;if(ah(bB)){bB=by}by=Number(by);bB=Number(bB);if(this.ready&&!this.disabled&&this.options.movable){if(ac(by)){bz.left=by;bA=true}if(ac(bB)){bz.top=bB;bA=true}if(bA){this.renderCanvas(true)}}},zoom:function l(bA,by){var bz=this.canvas;bA=Number(bA);if(bA<0){bA=1/(1-bA)}else{bA=1+bA}this.zoomTo(bz.width*bA/bz.naturalWidth,by)},zoomTo:function T(bH,bD){var bL=this.options,bJ=this.pointers,bC=this.canvas;var bB=bC.width,bK=bC.height,bG=bC.naturalWidth,bI=bC.naturalHeight;bH=Number(bH);if(bH>=0&&this.ready&&!this.disabled&&bL.zoomable){var bF=bG*bH;var bz=bI*bH;var bA=void 0;if(bD){bA=bD.originalEvent}if(this.trigger(bp,{originalEvent:bA,oldRatio:bB/bG,ratio:bF/bG}).isDefaultPrevented()){return}if(bA){var bE=this.$cropper.offset();var by=bJ&&y(bJ).length?aY(bJ):{pageX:bD.pageX||bA.pageX||0,pageY:bD.pageY||bA.pageY||0};bC.left-=(bF-bB)*((by.pageX-bE.left-bC.left)/bB);bC.top-=(bz-bK)*((by.pageY-bE.top-bC.top)/bK)}else{bC.left-=(bF-bB)/2;bC.top-=(bz-bK)/2}bC.width=bF;bC.height=bz;this.renderCanvas(true)}},rotate:function ao(by){this.rotateTo((this.image.rotate||0)+Number(by))},rotateTo:function be(by){by=Number(by);if(ac(by)&&this.ready&&!this.disabled&&this.options.rotatable){this.image.rotate=by%360;this.renderCanvas(true,true)}},scaleX:function aC(bz){var by=this.image.scaleY;this.scale(bz,ac(by)?by:1)},scaleY:function aA(bz){var by=this.image.scaleX;this.scale(ac(by)?by:1,bz)},scale:function a4(bA){var by=arguments.length>1&&arguments[1]!==undefined?arguments[1]:bA;var bB=this.image;var bz=false;bA=Number(bA);by=Number(by);if(this.ready&&!this.disabled&&this.options.scalable){if(ac(bA)){bB.scaleX=bA;bz=true}if(ac(by)){bB.scaleY=by;bz=true}if(bz){this.renderCanvas(true,true)}}},getData:function bo(){var by=arguments.length>0&&arguments[0]!==undefined?arguments[0]:false;var bA=this.options,bE=this.image,bz=this.canvas,bC=this.cropBox;var bD=void 0;if(this.ready&&this.cropped){bD={x:bC.left-bz.left,y:bC.top-bz.top,width:bC.width,height:bC.height};var bB=bE.width/bE.naturalWidth;a6.each(bD,function(bF,bG){bG/=bB;bD[bF]=by?Math.round(bG):bG})}else{bD={x:0,y:0,width:0,height:0}}if(bA.rotatable){bD.rotate=bE.rotate||0}if(bA.scalable){bD.scaleX=bE.scaleX||1;bD.scaleY=bE.scaleY||1}return bD},setData:function a7(bD){var bA=this.options,bE=this.image,bz=this.canvas;var bC={};if(a6.isFunction(bD)){bD=bD.call(this.element)}if(this.ready&&!this.disabled&&a6.isPlainObject(bD)){var by=false;if(bA.rotatable){if(ac(bD.rotate)&&bD.rotate!==bE.rotate){bE.rotate=bD.rotate;by=true}}if(bA.scalable){if(ac(bD.scaleX)&&bD.scaleX!==bE.scaleX){bE.scaleX=bD.scaleX;by=true}if(ac(bD.scaleY)&&bD.scaleY!==bE.scaleY){bE.scaleY=bD.scaleY;by=true}}if(by){this.renderCanvas(true,true)}var bB=bE.width/bE.naturalWidth;if(ac(bD.x)){bC.left=bD.x*bB+bz.left}if(ac(bD.y)){bC.top=bD.y*bB+bz.top}if(ac(bD.width)){bC.width=bD.width*bB}if(ac(bD.height)){bC.height=bD.height*bB}this.setCropBoxData(bC)}},getContainerData:function ae(){return this.ready?a6.extend({},this.container):{}},getImageData:function h(){return this.loaded?a6.extend({},this.image):{}},getCanvasData:function aF(){var by=this.canvas;var bz={};if(this.ready){a6.each(["left","top","width","height","naturalWidth","naturalHeight"],function(bA,bB){bz[bB]=by[bB]})}return bz},setCanvasData:function aH(bA){var by=this.canvas;var bz=by.aspectRatio;if(a6.isFunction(bA)){bA=bA.call(this.$element)}if(this.ready&&!this.disabled&&a6.isPlainObject(bA)){if(ac(bA.left)){by.left=bA.left}if(ac(bA.top)){by.top=bA.top}if(ac(bA.width)){by.width=bA.width;by.height=bA.width/bz}else{if(ac(bA.height)){by.height=bA.height;by.width=bA.height*bz}}this.renderCanvas(true)}},getCropBoxData:function aO(){var by=this.cropBox;return this.ready&&this.cropped?{left:by.left,top:by.top,width:by.width,height:by.height}:{}},setCropBoxData:function av(bC){var bz=this.cropBox;var bA=this.options.aspectRatio;var bB=void 0;var by=void 0;if(a6.isFunction(bC)){bC=bC.call(this.$element)}if(this.ready&&this.cropped&&!this.disabled&&a6.isPlainObject(bC)){if(ac(bC.left)){bz.left=bC.left}if(ac(bC.top)){bz.top=bC.top}if(ac(bC.width)&&bC.width!==bz.width){bB=true;bz.width=bC.width}if(ac(bC.height)&&bC.height!==bz.height){by=true;bz.height=bC.height}if(bA){if(bB){bz.height=bz.width/bA}else{if(by){bz.width=bz.height*bA}}}this.renderCropBox()}},getCroppedCanvas:function aZ(){var bI=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};if(!this.ready||!window.HTMLCanvasElement){return null}var bO=this.canvas;var bU=ba(this.$clone[0],this.image,bO,bI);if(!this.cropped){return bU}var bL=this.getData(),bN=bL.x,bM=bL.y,bK=bL.width,bV=bL.height;var bA=bK/bV;var bJ=k({aspectRatio:bA,width:bI.maxWidth||Infinity,height:bI.maxHeight||Infinity});var bZ=k({aspectRatio:bA,width:bI.minWidth||0,height:bI.minHeight||0});var b1=k({aspectRatio:bA,width:bI.width||bK,height:bI.height||bV}),bT=b1.width,bS=b1.height;
bT=Math.min(bJ.width,Math.max(bZ.width,bT));bS=Math.min(bJ.height,Math.max(bZ.height,bS));var bH=document.createElement("canvas");var bD=bH.getContext("2d");bH.width=D(bT);bH.height=D(bS);bD.fillStyle=bI.fillColor||"transparent";bD.fillRect(0,0,bT,bS);var bW=bI.imageSmoothingEnabled,bz=bW===undefined?true:bW,bF=bI.imageSmoothingQuality;bD.imageSmoothingEnabled=bz;if(bF){bD.imageSmoothingQuality=bF}var bP=bU.width;var bE=bU.height;var by=bN;var b2=bM;var bR=void 0;var bY=void 0;var bC=void 0;var bB=void 0;var bG=void 0;var bQ=void 0;if(by<=-bK||by>bP){by=0;bR=0;bC=0;bG=0}else{if(by<=0){bC=-by;by=0;bR=Math.min(bP,bK+by);bG=bR}else{if(by<=bP){bC=0;bR=Math.min(bK,bP-by);bG=bR}}}if(bR<=0||b2<=-bV||b2>bE){b2=0;bY=0;bB=0;bQ=0}else{if(b2<=0){bB=-b2;b2=0;bY=Math.min(bE,bV+b2);bQ=bY}else{if(b2<=bE){bB=0;bY=Math.min(bV,bE-b2);bQ=bY}}}var bX=[by,b2,bR,bY];if(bG>0&&bQ>0){var b0=bT/bK;bX.push(bC*b0,bB*b0,bG*b0,bQ*b0)}bD.drawImage.apply(bD,[bU].concat(aT(a6.map(bX,function(b3){return Math.floor(D(b3))}))));return bH},setAspectRatio:function al(bz){var by=this.options;if(!this.disabled&&!ah(bz)){by.aspectRatio=Math.max(0,bz)||NaN;if(this.ready){this.initCropBox();if(this.cropped){this.renderCropBox()}}}},setDragMode:function g(bB){var by=this.options;var bA=void 0;var bz=void 0;if(this.loaded&&!this.disabled){bA=bB===S;bz=by.movable&&bB===aP;bB=bA||bz?bB:bw;this.$dragBox.data(r,bB).toggleClass(at,bA).toggleClass(a3,bz);if(!by.cropBoxMovable){this.$face.data(r,bB).toggleClass(at,bA).toggleClass(a3,bz)}}}};var aL=function(){function by(bC,bA){for(var bz=0;bz<bA.length;bz++){var bB=bA[bz];bB.enumerable=bB.enumerable||false;bB.configurable=true;if("value" in bB){bB.writable=true}Object.defineProperty(bC,bB.key,bB)}}return function(bB,bz,bA){if(bz){by(bB.prototype,bz)}if(bA){by(bB,bA)}return bB}}();function aD(by,bz){if(!(by instanceof bz)){throw new TypeError("Cannot call a class as a function")}}var L=function(){function bE(bK){var bJ=arguments.length>1&&arguments[1]!==undefined?arguments[1]:{};aD(this,bE);if(!bK||!j.test(bK.tagName)){throw new Error("The first argument is required and must be an <img> or <canvas> element.")}this.element=bK;this.$element=a6(bK);this.options=a6.extend({},bd,a6.isPlainObject(bJ)&&bJ);this.completed=false;this.cropped=false;this.disabled=false;this.isImg=false;this.limited=false;this.loaded=false;this.ready=false;this.replaced=false;this.wheeling=false;this.originalUrl="";this.canvas=null;this.cropBox=null;this.pointers={};this.init()}aL(bE,[{key:"init",value:function bH(){var bJ=this.$element;var bK=void 0;if(bJ.is("img")){this.isImg=true;bK=bJ.attr("src")||"";this.originalUrl=bK;if(!bK){return}bK=bJ.prop("src")}else{if(bJ.is("canvas")&&window.HTMLCanvasElement){bK=bJ[0].toDataURL()}}this.load(bK)}},{key:"trigger",value:function bA(bJ,bK){var bL=a6.Event(bJ,bK);this.$element.trigger(bL);return bL}},{key:"load",value:function bG(bL){var bN=this;if(!bL){return}this.url=bL;this.image={};var bJ=this.$element,bK=this.options;if(!bK.checkOrientation||!window.ArrayBuffer){this.clone();return}if(s.test(bL)){if(ar.test(bL)){this.read(bm(bL))}else{this.clone()}return}var bM=new XMLHttpRequest();bM.onerror=function(){bN.clone()};bM.onload=function(){bN.read(bM.response)};if(bK.checkCrossOrigin&&az(bL)&&bJ.prop("crossOrigin")){bL=O(bL)}bM.open("get",bL);bM.responseType="arraybuffer";bM.withCredentials=bJ.prop("crossOrigin")==="use-credentials";bM.send()}},{key:"read",value:function bz(bO){var bN=this.options,bP=this.image;var bK=R(bO);var bM=0;var bL=1;var bJ=1;if(bK>1){this.url=bi(bO,"image/jpeg");var bQ=ax(bK);bM=bQ.rotate;bL=bQ.scaleX;bJ=bQ.scaleY}if(bN.rotatable){bP.rotate=bM}if(bN.scalable){bP.scaleX=bL;bP.scaleY=bJ}this.clone()}},{key:"clone",value:function bC(){var bJ=this.$element,bM=this.options,bL=this.url;var bK="";var bN=void 0;if(bM.checkCrossOrigin&&az(bL)){bK=bJ.prop("crossOrigin");if(bK){bN=bL}else{bK="anonymous";bN=O(bL)}}this.crossOrigin=bK;this.crossOriginUrl=bN;var bP=document.createElement("img");if(bK){bP.crossOrigin=bK}bP.src=bN||bL;var bO=a6(bP);this.$clone=bO;if(this.isImg){if(this.element.complete){this.start()}else{bJ.one(bg,a6.proxy(this.start,this))}}else{bO.one(bg,a6.proxy(this.start,this)).one(aK,a6.proxy(this.stop,this)).addClass(a0).insertAfter(bJ)}}},{key:"start",value:function by(){var bK=this;var bL=this.$clone;var bJ=this.$element;if(!this.isImg){bL.off(aK,this.stop);bJ=bL}Q(bJ[0],function(bM,bN){a6.extend(bK.image,{naturalWidth:bM,naturalHeight:bN,aspectRatio:bM/bN});bK.loaded=true;bK.build()})}},{key:"stop",value:function bD(){this.$clone.remove();this.$clone=null}},{key:"build",value:function bF(){var bO=this;if(!this.loaded){return}if(this.ready){this.unbuild()}var bJ=this.$element,bN=this.options,bP=this.$clone;var bL=a6(a8);var bK=bL.find("."+p+"-crop-box");var bM=bK.find("."+p+"-face");this.$container=bJ.parent();this.$cropper=bL;this.$canvas=bL.find("."+p+"-canvas").append(bP);this.$dragBox=bL.find("."+p+"-drag-box");this.$cropBox=bK;this.$viewBox=bL.find("."+p+"-view-box");this.$face=bM;bJ.addClass(aE).after(bL);if(!this.isImg){bP.removeClass(a0)}this.initPreview();this.bind();bN.aspectRatio=Math.max(0,bN.aspectRatio)||NaN;bN.viewMode=Math.max(0,Math.min(3,Math.round(bN.viewMode)))||0;this.cropped=bN.autoCrop;if(bN.autoCrop){if(bN.modal){this.$dragBox.addClass(M)}}else{bK.addClass(aE)}if(!bN.guides){bK.find("."+p+"-dashed").addClass(aE)}if(!bN.center){bK.find("."+p+"-center").addClass(aE)}if(bN.cropBoxMovable){bM.addClass(a3).data(r,G)}if(!bN.highlight){bM.addClass(aV)}if(bN.background){bL.addClass(p+"-bg")}if(!bN.cropBoxResizable){bK.find("."+p+"-line,."+p+"-point").addClass(aE)}this.setDragMode(bN.dragMode);this.render();this.ready=true;this.setData(bN.data);this.completing=setTimeout(function(){if(a6.isFunction(bN.ready)){bJ.one(m,bN.ready)}bO.trigger(m);bO.trigger(F,bO.getData());bO.completed=true},0)}},{key:"unbuild",value:function bI(){if(!this.ready){return}if(!this.completed){clearTimeout(this.completing)}this.ready=false;this.completed=false;this.initialImage=null;this.initialCanvas=null;this.initialCropBox=null;this.container=null;this.canvas=null;this.cropBox=null;this.unbind();this.resetPreview();this.$preview=null;this.$viewBox=null;this.$cropBox=null;this.$dragBox=null;this.$canvas=null;this.$container=null;this.$cropper.remove();this.$cropper=null}}],[{key:"setDefaults",value:function bB(bJ){a6.extend(bd,a6.isPlainObject(bJ)&&bJ)}}]);return bE}();if(a6.extend){a6.extend(L.prototype,ap,ay,I,b,aQ,a9)}if(a6.fn){var x=a6.fn.cropper;a6.fn.cropper=function i(bC){for(var bz=arguments.length,bA=Array(bz>1?bz-1:0),bB=1;bB<bz;bB++){bA[bB-1]=arguments[bB]}var by=void 0;this.each(function(bG,bF){var bD=a6(bF);var bI=bD.data(p);if(!bI){if(/destroy/.test(bC)){return}var bE=a6.extend({},bD.data(),a6.isPlainObject(bC)&&bC);bI=new L(bF,bE);bD.data(p,bI)}if(bf(bC)){var bH=bI[bC];if(a6.isFunction(bH)){by=bH.apply(bI,bA)}}});return ah(by)?this:by};a6.fn.cropper.Constructor=L;a6.fn.cropper.setDefaults=L.setDefaults;a6.fn.cropper.noConflict=function W(){a6.fn.cropper=x;return this}}})));